<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCEED 2026 Score Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a;
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #3d2817 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            border-bottom: 4px solid #8B4513;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .disclaimer {
            background: rgba(139, 69, 19, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.95em;
            font-style: italic;
            border-left: 4px solid #8B4513;
        }

        .main-content {
            padding: 40px;
            background: #f5f5f5;
        }

        .upload-section {
            background: white;
            border: 3px dashed #8B4513;
            border-radius: 12px;
            padding: 50px;
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .upload-section:hover {
            border-color: #D2691E;
            background: #FFF8DC;
        }

        .upload-section.drag-over {
            background: #FAEBD7;
            border-color: #D2691E;
            transform: scale(1.02);
        }

        .file-input-label {
            display: inline-block;
            padding: 15px 35px;
            background: linear-gradient(135deg, #1a1a1a 0%, #3d2817 100%);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .file-input-label:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        input[type="file"] {
            display: none;
        }

        .file-name {
            margin-top: 15px;
            color: #666;
            font-style: italic;
            min-height: 20px;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1a1a1a 0%, #3d2817 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.5);
        }

        .btn-secondary {
            background: #8B4513;
            color: white;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #A0522D;
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: #8B4513;
            font-weight: 600;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #8B4513;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .output-section {
            display: none;
        }

        .output-section.active {
            display: block;
        }

        .score-summary {
            background: linear-gradient(135deg, #1a1a1a 0%, #3d2817 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .score-summary h2 {
            font-size: 2.5em;
            margin-bottom: 30px;
        }

        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .score-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 12px;
            border: 2px solid rgba(139, 69, 19, 0.5);
        }

        .score-value {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .score-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .section-results {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .section-header {
            background: linear-gradient(135deg, #1a1a1a 0%, #3d2817 100%);
            color: white;
            padding: 20px 30px;
            margin: -30px -30px 25px -30px;
            border-radius: 12px 12px 0 0;
            font-size: 1.5em;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-score {
            font-size: 1.8em;
            color: #FFD700;
        }

        .question-card {
            margin-bottom: 25px;
            padding: 25px;
            background: #f9f9f9;
            border-radius: 10px;
            border-left: 6px solid #ccc;
        }

        .question-card.correct {
            border-left-color: #28a745;
            background: #f0fff4;
        }

        .question-card.incorrect {
            border-left-color: #dc3545;
            background: #fff0f0;
        }

        .question-card.partial {
            border-left-color: #ffc107;
            background: #fffbf0;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .question-number {
            font-weight: bold;
            font-size: 1.2em;
            color: #1a1a1a;
        }

        .question-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .status-correct {
            background: #28a745;
            color: white;
        }

        .status-incorrect {
            background: #dc3545;
            color: white;
        }

        .status-partial {
            background: #ffc107;
            color: #000;
        }

        .question-text {
            color: #333;
            line-height: 1.7;
            margin-bottom: 15px;
            font-size: 1.05em;
        }

        .answer-comparison {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .answer-row {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
        }

        .answer-label {
            font-weight: 600;
            color: #666;
        }

        .answer-value {
            font-weight: bold;
        }

        .answer-correct {
            color: #28a745;
        }

        .answer-incorrect {
            color: #dc3545;
        }

        .marks-info {
            margin-top: 10px;
            font-size: 1.1em;
            font-weight: 600;
            color: #8B4513;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 8px;
            border-left: 6px solid #f5c6cb;
            margin-bottom: 25px;
            display: none;
        }

        .error.active {
            display: block;
        }

        .footer {
            background: #1a1a1a;
            color: #fff;
            padding: 30px;
            text-align: center;
        }

        .footer a {
            color: #8B4513;
            text-decoration: none;
            font-weight: 600;
        }

        .footer a:hover {
            color: #D2691E;
            text-decoration: underline;
        }

        .credits {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #444;
            font-size: 0.9em;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .controls {
                flex-direction: column;
            }

            .score-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì UCEED 2026 Score Calculator</h1>
            <p>Calculate your UCEED 2026 score by comparing your responses with the answer key</p>
            <div class="disclaimer">
                <strong>‚ö†Ô∏è Note:</strong> This tool is created to help students verify their scores after the chaotic exam experience created by the brilliant minds at IIT. Use it responsibly! 
            </div>
        </div>

        <div class="main-content">
            <div class="upload-section">
                <h3 style="color: #1a1a1a; margin-bottom: 20px; font-size: 1.5em;">üìÑ Upload Your Response PDF</h3>
                <p style="color: #666; margin-bottom: 25px;">Upload your UCEED 2026 response sheet PDF to calculate your score</p>
                <label for="responsePdf" class="file-input-label">
                    Choose Response PDF
                </label>
                <input type="file" id="responsePdf" accept=".pdf">
                <div class="file-name" id="responseFileName">No file selected</div>
            </div>

            <div class="error" id="errorMsg"></div>

            <div class="controls">
                <button class="btn btn-primary" id="calculateBtn" disabled>üßÆ Calculate Score</button>
                <button class="btn btn-secondary" id="downloadBtn" disabled>üì• Download Results</button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Processing your response sheet and calculating scores...</p>
            </div>

            <div class="output-section" id="outputSection">
                <div class="score-summary">
                    <h2>Your UCEED 2026 Score</h2>
                    <div class="score-grid">
                        <div class="score-card">
                            <div class="score-value" id="totalScore">0</div>
                            <div class="score-label">Total Score</div>
                        </div>
                        <div class="score-card">
                            <div class="score-value" id="totalCorrect">0</div>
                            <div class="score-label">Correct</div>
                        </div>
                        <div class="score-card">
                            <div class="score-value" id="totalIncorrect">0</div>
                            <div class="score-label">Incorrect</div>
                        </div>
                        <div class="score-card">
                            <div class="score-value" id="totalUnattempted">0</div>
                            <div class="score-label">Unattempted</div>
                        </div>
                    </div>
                </div>

                <div id="detailedResults"></div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Thanks to <a href="https://aaruxhhh.github.io/UCEED-2026-Score-Calculator/" target="_blank">aaruxhhh</a> for the inspiration!</strong></p>
            <div class="credits">
                <p>&copy; beyondmebtw 2022-present</p>
                <p>beyondmebtw created by <a href="https://beyondmebtw.com" target="_blank">Pranav Veeraghanta</a></p>
            </div>
        </div>
    </div>

    <!-- PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        // Initialize PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // DOM elements
        const responsePdf = document.getElementById('responsePdf');
        const responseFileName = document.getElementById('responseFileName');
        const calculateBtn = document.getElementById('calculateBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const loading = document.getElementById('loading');
        const outputSection = document.getElementById('outputSection');
        const errorMsg = document.getElementById('errorMsg');
        const detailedResults = document.getElementById('detailedResults');

        let responsePdfFile = null;
        let answerKeyData = {
  "sections": {
    "section_1_nat": {
      "description": "Numerical Answer Type (NAT)",
      "total_questions": 14,
      "marks_per_question": 4,
      "negative_marking": 0,
      "total_marks": 56,
      "questions": [
        {
          "question_number": 1,
          "question_text": "How many times does the most used black coloured shape appear in the composition shown below?",
          "question_type": "NAT",
          "answer": 14,
          "answer_range": null
        },
        {
          "question_number": 2,
          "question_text": "In the image shown below, PQ = QR = QS = 2 units. Also, QT = TS = QU = UR. The points T and U are the centre points of the semicircles. What is the total area of shaded portions in square units?",
          "question_type": "NAT",
          "answer": 2,
          "answer_range": null
        },
        {
          "question_number": 3,
          "question_text": "What is the number that you get when you divide the difference between the number of triangles and number of circles by the number of rectangles for the image shown below?",
          "question_type": "NAT",
          "answer": 6,
          "answer_range": null
        },
        {
          "question_number": 4,
          "question_text": "Shown below is the front and top views of two cubes. The red and blue cubes are made up of metal and wax respectively. Red cube is heated and is hot enough to melt wax in the blue cube. As shown in the front and top views, the red cube is moved along the path PQRS creating sharp edges and flat surfaces on the blue cube. What is the total number of surfaces the blue cube will have after the red cube reaches the point S?",
          "question_type": "NAT",
          "answer": 16,
          "answer_range": null
        },
        {
          "question_number": 5,
          "question_text": "One of the pots does not belong to the group of pots shown below. What is the number written on that pot?",
          "question_type": "NAT",
          "answer": 62,
          "answer_range": null
        },
        {
          "question_number": 6,
          "question_text": "What is the number of different patterns on the capsules shown below?",
          "question_type": "NAT",
          "answer": 4,
          "answer_range": null
        },
        {
          "question_number": 7,
          "question_text": "A composition made of letters is shown below. What is the total number of letters used to create this image?",
          "question_type": "NAT",
          "answer": 31,
          "answer_range": null
        },
        {
          "question_number": 8,
          "question_text": "A sharpened pencil with eraser is shown in image P. How many sharpened pencils with erasers are in image Q?",
          "question_type": "NAT",
          "answer": 8,
          "answer_range": null
        },
        {
          "question_number": 9,
          "question_text": "Several kettles are shown below. What is the total number of usable kettles that are designed to store and pour hot water?",
          "question_type": "NAT",
          "answer": 13,
          "answer_range": null
        },
        {
          "question_number": 10,
          "question_text": "Given below are 8 triangular pieces of a puzzle made from the shape P. What is the three-digit number formed when these pieces are arranged correctly?",
          "question_type": "NAT",
          "answer": 745,
          "answer_range": null
        },
        {
          "question_number": 11,
          "question_text": "Given below is a drawing on a sheet of paper. Make a cut along the solid arcs and fold the resulting semicircular rings at 90 degrees along the dotted lines. What is the number of raised semicircular rings after following these steps?",
          "question_type": "NAT",
          "answer": 5,
          "answer_range": null
        },
        {
          "question_number": 12,
          "question_text": "A mobile screen has a dimension of 10 cm x 4 cm (height x width). A mobile user is viewing a picture in portrait mode and it occupies the entire screen. The user rotates the screen to landscape mode. After rotation, the height of the picture is now the width of the screen and its width gets reduced proportionately, leaving equal blank spaces on both sides of the picture. What is the area (in square centimeters) of the blank space on the left-hand side of the picture?",
          "question_type": "NAT",
          "answer": 16.8,
          "answer_range": null
        },
        {
          "question_number": 13,
          "question_text": "What number will replace the question mark?",
          "question_type": "NAT",
          "answer": 34,
          "answer_range": null
        },
        {
          "question_number": 14,
          "question_text": "A tank with internal dimension 10 cm x 10 cm x 10 cm (length x width x height) is fully filled with spherical marbles, each marble having a diameter of 1 cm. Each layer of marbles should have equal number of marbles. Water is then poured into the tank. What is the volume of water in cubic centimeters required to fill the voids? (Use œÄ=22/7)",
          "question_type": "NAT",
          "answer": 476,
          "answer_range": "470-480"
        }
      ]
    },
    "section_2_msq": {
      "description": "Multiple Select Questions (MSQ)",
      "total_questions": 15,
      "marks_scheme": {
        "full_marks": 4,
        "partial_3": 3,
        "partial_2": 2,
        "partial_1": 1,
        "zero": 0,
        "negative": -1
      },
      "total_marks": 60,
      "questions": [
        {
          "question_number": 15,
          "question_text": "Image P shows an object as seen from the top. Which of the objects given below will appear as shown in image P when viewed from the top? Consider all the objects are made with opaque solids.",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["A", "B", "C"]
        },
        {
          "question_number": 16,
          "question_text": "Q, R, S and T are cut-out shapes used to create a composition shown in image P. These cut-out shapes could be rotated and combined without overlapping to create the composition. These cut-out shapes can also be repeated. What is/are the correct combination(s) that can be used to create the composition shown in image P?",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["B", "C"]
        },
        {
          "question_number": 17,
          "question_text": "Given below is a pattern P, composed of three different shapes 1, 2, and 3. Which options show the pattern(s) that is/are possible if the shape 2 is cut in half along the vertical axis, the shape 3 is rotated clockwise at the center by 45 degrees, and the shape 1 remains unchanged? Overlapping of shapes is not allowed.",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["A", "B", "D"]
        },
        {
          "question_number": 18,
          "question_text": "Given below are five images P, Q, R, S and T. Each of these is rotated about its center. Which of the following statement(s) is/are TRUE? (Ignore minor variations due to pixelated appearance)",
          "question_type": "MSQ",
          "options": [
            "A. Patterns Q, S and T will look the same when rotated by 60¬∞",
            "B. Patterns Q, R and T will look the same when rotated by 120¬∞",
            "C. Patterns P, S and T will not look the same when rotated by 60¬∞",
            "D. Patterns Q, R and T will look the same when rotated by 60¬∞ or 120¬∞"
          ],
          "correct_answers": ["B", "C", "D"],
          "note": "Answer key shows B,C or B,C,D"
        },
        {
          "question_number": 19,
          "question_text": "In the image below, a combination of gears (1-5), pulley (6), weight (W), belts (connecting 1&2, 4&6) and a shaft drive is shown. The shaft rotates in the direction of the arrow without any horizontal translation. Which of the following statement is /are CORRECT?",
          "question_type": "MSQ",
          "options": [
            "A. 5 rotates clockwise and W moves upwards",
            "B. 4 rotates anticlockwise and W moves downwards",
            "C. 5 and 4 rotate in opposite directions",
            "D. 1 and 4 rotate in opposite direction"
          ],
          "correct_answers": ["A", "C"]
        },
        {
          "question_number": 20,
          "question_text": "Which of the following statements are TRUE for Ajrakh, Paithani, Kalamkari, Phulkari, Khes and Bandhani?",
          "question_type": "MSQ",
          "options": [
            "A. All of the above are related to textiles of India",
            "B. At least three of the above are painting techniques of India",
            "C. Three of the above are artforms from Punjab",
            "D. Two of the above are weaving crafts from India"
          ],
          "correct_answers": ["A", "D"]
        },
        {
          "question_number": 21,
          "question_text": "Which of the options is/are paintings by the artist M. F. Hussain?",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["A", "B", "C", "D"]
        },
        {
          "question_number": 22,
          "question_text": "Which of the below is a/are cinema camera maker(s)?",
          "question_type": "MSQ",
          "options": [
            "A. RED",
            "B. ARRI",
            "C. Canon",
            "D. Wacom"
          ],
          "correct_answers": ["A", "B", "C"]
        },
        {
          "question_number": 23,
          "question_text": "Which Indian city/cities is/are designated by UNESCO as a Creative City, until 2024?",
          "question_type": "MSQ",
          "options": [
            "A. Pune",
            "B. Kozhikode",
            "C. Gwalior",
            "D. Varanasi"
          ],
          "correct_answers": ["B", "C", "D"]
        },
        {
          "question_number": 24,
          "question_text": "Shown below are Indian vehicle number plates with colour codes. Which of the option/s is/are correct?",
          "question_type": "MSQ",
          "options": [
            "A. R is a private vehicle",
            "B. P, S & U are private vehicles",
            "C. Q, R, T & X are commercial vehicles",
            "D. X is a defence vehicle"
          ],
          "correct_answers": ["B", "D"]
        },
        {
          "question_number": 25,
          "question_text": "1, 2, 3 and 4 are photographs captured using a camera with a lens set at aperture P, Q, R or S. Which of the options is/are correct?",
          "question_type": "MSQ",
          "options": [
            "A. P - 3",
            "B. P - 2",
            "C. R - 1",
            "D. S - 3"
          ],
          "correct_answers": ["A", "C"]
        },
        {
          "question_number": 26,
          "question_text": "Which of the following image(s) can be created by the nib type illustrated below?",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["A", "B", "C"]
        },
        {
          "question_number": 27,
          "question_text": "Which of these photographs follow the Rule of Thirds?",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["A", "B", "C"]
        },
        {
          "question_number": 28,
          "question_text": "A continuous strip with a pattern is shown below. Which of the options given below is/are part of the continuous strip?",
          "question_type": "MSQ",
          "options": ["A", "B", "C", "D"],
          "correct_answers": ["A", "D"]
        },
        {
          "question_number": 29,
          "question_text": "A composition made using letters from a specific font is shown below. Some letters are repeated but there is no distortion, rotation, flip or any change in orientation. Letters are used in the original form as seen in the font. Which of the following words can be formed using the letters shown in the image below?",
          "question_type": "MSQ",
          "options": [
            "A. note",
            "B. ghost",
            "C. short",
            "D. enter"
          ],
          "correct_answers": ["B", "C"]
        }
      ]
    },
    "section_3_mcq": {
      "description": "Multiple Choice Questions (MCQ)",
      "total_questions": 28,
      "marks_per_question": 3,
      "negative_marking": -0.71,
      "total_marks": 84,
      "questions": [
        {
          "question_number": 30,
          "question_text": "Which of the following statements is correct for a longitudinal marking provided at the centre of a road?",
          "question_type": "MCQ",
          "options": [
            "A. A broken longitudinal line allows overtaking",
            "B. A solid longitudinal line always permits overtaking",
            "C. Longitudinal markings are meant only for aesthetics",
            "D. Double solid lines may be crossed when overtaking a slow-moving vehicle"
          ],
          "correct_answer": "A"
        },
        {
          "question_number": 31,
          "question_text": "Four lines of text from a poem by E. E. Cummings is given below: 'may come home with smooth round stone / as small as a world and as large as alone / for whatever we may lose (like a you or a me) / its always ourselves we find at sea'. One of the four lines is depicted in the images below. Identify the image which correctly represents one line of the poem.",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "B"
        },
        {
          "question_number": 32,
          "question_text": "Samantha, Reema and Payal went late at night to visit an adventure place called The Mystery Spot. The place has a strange window-less room with white walls. One of the walls has a blue triangle and a red circle painted on it. The girls entered the room in turns. First, Samantha entered the room and came out telling that there were two shapes painted on the wall‚Äîone triangle and one circle. Then, Reema entered the same room and came out surprised as she saw only a triangle on the wall. Lastly, Payal entered the room and claimed that she saw only a circle on the wall. Which of the four statements is correct?",
          "question_type": "MCQ",
          "options": [
            "A. When Samantha entered, the room was lit by a blue light. When Reema entered the room, the light was changed to white light and when Payal entered the room, the light was changed to red",
            "B. When Samantha entered, the room was lit by a white light. When Reema entered the room, the light was changed to blue light and when Payal entered the room, the light was changed to red",
            "C. When Samantha entered, the room was lit by a white light. When Reema entered the room, the light was changed to red light and when Payal entered the room, the light was changed to blue",
            "D. When Samantha entered, the room was lit by a blue light. When Reema entered the room, the light was changed to red light and when Payal entered the room, the light was changed to white"
          ],
          "correct_answer": "C"
        },
        {
          "question_number": 33,
          "question_text": "Which of the options will replace the question mark?",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "B"
        },
        {
          "question_number": 34,
          "question_text": "Given below are four letterboxes, three of them are written in the same font. Find the one which is written in a different font.",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "D"
        },
        {
          "question_number": 35,
          "question_text": "Who is the first Indian to receive an Academy Award (Oscar)?",
          "question_type": "MCQ",
          "options": [
            "A. Bhanu Athaiya",
            "B. A. R. Rahman",
            "C. Satyajit Ray",
            "D. M. Night Shyamalan"
          ],
          "correct_answer": "A"
        },
        {
          "question_number": 36,
          "question_text": "Shown below are four options, each showing consecutive frames representing the movement of a pendulum of an old-style wall clock for an animation movie. Which is the correct option?",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "C"
        },
        {
          "question_number": 37,
          "question_text": "Match the animals (1, 2, 3, 4) with their respective footprints (P,Q, R, S).",
          "question_type": "MCQ",
          "options": [
            "A. 1-P, 2-R, 3-Q, 4-S",
            "B. 1-Q, 2-R, 3-S, 4-P",
            "C. 1-P, 2-S, 3-R, 4-Q",
            "D. 1-R, 2-S, 3-P, 4-Q"
          ],
          "correct_answer": "B"
        },
        {
          "question_number": 38,
          "question_text": "Identify the final image created if a circular transparent plastic sheet P printed with opaque shapes is folded in the sequence shown below.",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "B"
        },
        {
          "question_number": 39,
          "question_text": "ChatGPT is an extremely popular artificial intelligence (AI) chatbot from OpenAI. Which of the following options is the correct symbol/logo of ChatGPT?",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "D"
        },
        {
          "question_number": 40,
          "question_text": "The word 'HOME' was printed on a circular disc and a smaller disc from the center was cut and removed from it. Later, another disc was cut from the smaller disc in the same manner. Find the correct set of discs, if the discs were rotated.",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "C"
        },
        {
          "question_number": 41,
          "question_text": "P is a completed puzzle made of four-square pieces. If the four pieces are removed to play the puzzle again, which piece shown below will NOT fit into the final image?",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "C"
        },
        {
          "question_number": 42,
          "question_text": "A delicious triangular shaped chocolate was left open at night. A mouse could smell the yummy chocolate and could not resist but eat some of it. The remaining chocolate is shown below. How many triangles (including partial) have been eaten?",
          "question_type": "MCQ",
          "options": [
            "A. 23",
            "B. 24",
            "C. 25",
            "D. 26"
          ],
          "correct_answer": "C"
        },
        {
          "question_number": 43,
          "question_text": "Closely observe the effect of light and shadow caused by the Sun on the spheres P, Q, R and S. Which is the correct option?",
          "question_type": "MCQ",
          "options": [
            "A. P =10 am Q = 10:30 am R = 12 noon S = 6 pm",
            "B. P = 3 pm Q = 6 am R = 12 noon S = 10:30 am",
            "C. P = 9:30 am Q = 3 pm R = 12 noon S = 9 am",
            "D. P = 10:30 am Q = 6 pm R =12 noon S = 1 pm"
          ],
          "correct_answer": "D"
        },
        {
          "question_number": 44,
          "question_text": "The little ones of parents A, B, C, and D were separated by a 2D maze. Only one parent could find its baby. Identify the parent.",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "B"
        },
        {
          "question_number": 45,
          "question_text": "What is the total number of capital letter 'T' shown in the image below?",
          "question_type": "MCQ",
          "options": [
            "A. 12",
            "B. 14",
            "C. 16",
            "D. 18"
          ],
          "correct_answer": "C"
        },
        {
          "question_number": 46,
          "question_text": "If delulu = 010101, skibidi = 0010101, bussin = 010010, and ghosted = 0010010, then what is 010100?",
          "question_type": "MCQ",
          "options": [
            "A. boujee",
            "B. mewing",
            "C. pookie",
            "D. cheugy"
          ],
          "correct_answer": "B"
        },
        {
          "question_number": 47,
          "question_text": "Which of the options fits with the black solid figure and makes it a square?",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "C"
        },
        {
          "question_number": 48,
          "question_text": "The following images show cave paintings from India. Which of the options is correct?",
          "question_type": "MCQ",
          "options": [
            "A. P - Ellora, Q - Ajanta, R - Bhimbetka, S - Sittanavasal",
            "B. P - Ellora, Q - Ajanta, R - Jhalawar, S - Bhimbetka",
            "C. P - Ajanta, Q - Ellora, R - Bhimbetka, S - Sittanavasal",
            "D. P - Ajanta, Q - Ellora, R - Jhalawar, S - Bhimbetka"
          ],
          "correct_answer": "C"
        },
        {
          "question_number": 49,
          "question_text": "The following image shows a set of letters in different fonts. Which of the options is the word formed by letters of the same font?",
          "question_type": "MCQ",
          "options": [
            "A. knowing",
            "B. pester",
            "C. delight",
            "D. navel"
          ],
          "correct_answer": "C"
        },
        {
          "question_number": 50,
          "question_text": "P is a transparent glass filled with water as shown below. Q is a white cylinder with parallel lines printed around it. If the cylinder is viewed through the glass from the direction of the arrow, find the correct pattern observed.",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "B"
        },
        {
          "question_number": 51,
          "question_text": "A toy is made with cardboard and rivets. As shown below, the two car cut-outs are attached on top of the parallel cardboard strips which should move when the child pushes or pulls the horizontal cardboard strip. Different linkage mechanisms are made with cardboard strips (rectangles) and connector pivots (circles). Black circles are fixed pivots (attached to the grey base) and white circles are moving pivots (not attached to the grey base). Which option will show a collision between the two cars?",
          "question_type": "MCQ",
          "options": ["A", "B", "C", "D"],
          "correct_answer": "B"
        },
        {
          "question_number": 52,
          "question_text": "What is the total number of musical instruments in the image below?",
          "question_type": "MCQ",
          "options": [
            "A. 27",
            "B. 28",
            "C. 26",
            "D. 25"
          ],
          "correct_answer": "A"
        },
        {
          "question_number": 53,
          "question_text": "Shown below are letters 'e' taken from four popular logos, arranged in a sequence. Which of the options is the correct sequence?",
          "question_type": "MCQ",
          "options": [
            "A. Reliance ‚Äì Nestle ‚Äì Google ‚Äì Acer",
            "B. Nestle ‚Äì Reliance ‚Äì Google ‚Äì Acer",
            "C. Google ‚Äì Nestle ‚Äì Reliance ‚Äì Acer",
            "D. Reliance ‚Äì Google ‚Äì Nestle ‚Äì Acer"
          ],
          "correct_answer": "D"
        },
        {
          "question_number": 54,
          "question_text": "Shown below are the key frames of a bird flying. Which of the following options is the correct order?",
          "question_type": "MCQ",
          "options": [
            "A. 1, 4, 5, 3, 2",
            "B. 1, 4, 2, 5, 3",
            "C. 1, 3, 4, 5, 2",
            "D. 1, 5, 4, 2, 3"
          ],
          "correct_answer": "B"
        },
        {
          "question_number": 55,
          "question_text": "Shown below is a traditional metal artefact made using the lost-wax casting technique. What is this craft called?",
          "question_type": "MCQ",
          "options": [
            "A. Bidriware",
            "B. Thewa",
            "C. Filigree",
            "D. Dokra"
          ],
          "correct_answer": "D"
        },
        {
          "question_number": 56,
          "question_text": "A lever mechanism has Effort (E), Fulcrum (F) and Load (L). For example, a pair of scissors will have an order 'EFL' as shown in the image below. Similarly, choose the correct order for a Tweezer and a Nutcracker.",
          "question_type": "MCQ",
          "options": [
            "A. Tweezer=EFL, Nutcracker=FEL",
            "B. Tweezer=FEL, Nutcracker=ELF",
            "C. Tweezer=FLE, Nutcracker=FEL",
            "D. Tweezer=LFE, Nutcracker=LFE"
          ],
          "correct_answer": "B"
        },
        {
          "question_number": 57,
          "question_text": "What is the main purpose for the presence of water in a toilet bowl (Western Commode/ Water Closet)?",
          "question_type": "MCQ",
          "options": [
            "A. To prevent back flow of sewer gases",
            "B. To efficiently flush solid, semi-solid fecal matter",
            "C. To regulate water temperature in plumbing lines",
            "D. To neutralize acidic waste materials"
          ],
          "correct_answer": "A"
        }
      ]
    }
  }
};
        let calculatedResults = null;

        // File input handler
        responsePdf.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file && file.type === 'application/pdf') {
                responsePdfFile = file;
                responseFileName.textContent = `Selected: ${file.name}`;
                calculateBtn.disabled = false;
                hideError();
            } else {
                showError('Please select a valid PDF file for responses');
                calculateBtn.disabled = true;
            }
        });

        // Calculate button handler
        calculateBtn.addEventListener('click', async () => {
            if (!responsePdfFile || !answerKeyData) return;
            
            loading.classList.add('active');
            outputSection.classList.remove('active');
            hideError();
            
            try {
                // Extract text from PDF
                const arrayBuffer = await responsePdfFile.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                
                let allText = '';
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    allText += pageText + ' ';
                }
                
                // Parse the extracted text
                const userResponses = parseQuestionPaper(allText.trim());
                
                // Calculate scores
                calculatedResults = calculateScore(userResponses, answerKeyData);
                
                // Display results
                displayResults(calculatedResults);
                
                downloadBtn.disabled = false;
                
            } catch (error) {
                showError(`Error processing files: ${error.message}`);
                console.error(error);
            } finally {
                loading.classList.remove('active');
            }
        });

        // Parse question paper text
        function parseQuestionPaper(text) {
            // Remove participant information
            text = text.replace(/UCEED \d{4}.*?Subject UCEED \d{4}\./g, '');
            
            const questionBlocks = text.split(/Q\.\s*(\d+)/g).filter(s => s.trim());
            
            const result = {
                section_1_nat: [],
                section_2_msq: [],
                section_3_mcq: []
            };
            
            for (let i = 0; i < questionBlocks.length; i += 2) {
                if (i + 1 >= questionBlocks.length) break;
                
                const questionNum = parseInt(questionBlocks[i].trim());
                const questionContent = questionBlocks[i + 1];
                
                const question = parseQuestion(questionNum, questionContent);
                
                if (question) {
                    // Categorize by question type
                    if (question.question_type === 'NAT') {
                        result.section_1_nat.push(question);
                    } else if (question.question_type === 'MSQ') {
                        result.section_2_msq.push(question);
                    } else if (question.question_type === 'MCQ') {
                        result.section_3_mcq.push(question);
                    }
                }
            }
            
            return result;
        }

        // Parse individual question
        function parseQuestion(questionNum, content) {
            try {
                const questionIdMatch = content.match(/Question ID\s*:\s*(\d+)/);
                const questionId = questionIdMatch ? questionIdMatch[1] : null;
                
                const statusMatch = content.match(/Status\s*:\s*(Answered|Not Answered|Marked for Review|Not Visited)/);
                const status = statusMatch ? statusMatch[1] : 'Unknown';
                
                const hasOptions = content.includes('Options');
                
                let questionText = '';
                let options = [];
                let answer = null;
                let questionType = '';
                
                if (hasOptions) {
                    const textMatch = content.match(/^(.*?)Options/s);
                    questionText = textMatch ? textMatch[1].trim() : '';
                    questionText = questionText.replace(/Question ID.*$/s, '').trim();
                    
                    const optionsSection = content.match(/Options(.*?)Question ID/s);
                    if (optionsSection) {
                        const optionsText = optionsSection[1];
                        const optionMatches = optionsText.match(/(\d+)\.\s*([^0-9]+?)(?=\d+\.|$)/g);
                        
                        if (optionMatches) {
                            options = optionMatches.map(opt => {
                                const match = opt.match(/(\d+)\.\s*(.+)/);
                                return match ? {
                                    number: parseInt(match[1]),
                                    text: match[2].trim()
                                } : null;
                            }).filter(Boolean);
                        }
                    }
                    
                    const answerMatch = content.match(/Chosen Option\s*:\s*([\d,\s]+)/);
                    if (answerMatch) {
                        const answerStr = answerMatch[1].trim();
                        if (answerStr.includes(',')) {
                            answer = answerStr.split(',').map(a => parseInt(a.trim()));
                            questionType = 'MSQ';
                        } else {
                            answer = parseInt(answerStr);
                            questionType = 'MCQ';
                        }
                    }
                } else {
                    questionText = content.replace(/Given Answer.*$/s, '').trim();
                    questionText = questionText.replace(/Question ID.*$/s, '').trim();
                    
                    const answerMatch = content.match(/Given Answer\s*:\s*([\d.]+)/);
                    answer = answerMatch ? parseFloat(answerMatch[1]) : null;
                    questionType = 'NAT';
                }
                
                return {
                    question_number: questionNum,
                    question_text: questionText,
                    question_type: questionType,
                    options: options.length > 0 ? options : null,
                    answer: answer,
                    status: status,
                    question_id: questionId
                };
            } catch (error) {
                console.error(`Error parsing question ${questionNum}:`, error);
                return null;
            }
        }

        // Calculate similarity between two strings
        function calculateSimilarity(str1, str2) {
            str1 = str1.toLowerCase().replace(/[^a-z0-9]/g, '');
            str2 = str2.toLowerCase().replace(/[^a-z0-9]/g, '');
            
            const len1 = str1.length;
            const len2 = str2.length;
            const matrix = [];
            
            for (let i = 0; i <= len2; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= len1; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= len2; i++) {
                for (let j = 1; j <= len1; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            const distance = matrix[len2][len1];
            const maxLen = Math.max(len1, len2);
            return maxLen === 0 ? 1 : 1 - distance / maxLen;
        }

        // Find matching question in answer key
        function findMatchingQuestion(userQuestion, answerKeyQuestions) {
            let bestMatch = null;
            let highestSimilarity = 0;
            
            for (const akQuestion of answerKeyQuestions) {
                const similarity = calculateSimilarity(
                    userQuestion.question_text,
                    akQuestion.question_text
                );
                
                if (similarity > highestSimilarity && similarity > 0.7) {
                    highestSimilarity = similarity;
                    bestMatch = akQuestion;
                }
            }
            
            return bestMatch;
        }

        // Calculate score
        function calculateScore(userResponses, answerKey) {
            const results = {
                sections: {},
                total_score: 0,
                total_correct: 0,
                total_incorrect: 0,
                total_partial: 0,
                total_unattempted: 0,
                total_questions: 0
            };
            
            // Process Section 1 (NAT)
            const section1 = processNATSection(
                userResponses.section_1_nat,
                answerKey.sections.section_1_nat
            );
            results.sections.section_1_nat = section1;
            
            // Process Section 2 (MSQ)
            const section2 = processMSQSection(
                userResponses.section_2_msq,
                answerKey.sections.section_2_msq
            );
            results.sections.section_2_msq = section2;
            
            // Process Section 3 (MCQ)
            const section3 = processMCQSection(
                userResponses.section_3_mcq,
                answerKey.sections.section_3_mcq
            );
            results.sections.section_3_mcq = section3;
            
            // Calculate totals
            [section1, section2, section3].forEach(section => {
                results.total_score += section.score;
                results.total_correct += section.correct_count;
                results.total_incorrect += section.incorrect_count;
                results.total_partial += section.partial_count || 0;
                results.total_unattempted += section.unattempted_count;
                results.total_questions += section.total_questions;
            });
            
            return results;
        }

        // Process NAT Section
        function processNATSection(userQuestions, answerKeySection) {
            const result = {
                name: 'Section 1 - NAT',
                score: 0,
                correct_count: 0,
                incorrect_count: 0,
                unattempted_count: 0,
                total_questions: answerKeySection.total_questions,
                questions: []
            };
            
            userQuestions.forEach(userQ => {
                const matchedQ = findMatchingQuestion(userQ, answerKeySection.questions);
                
                if (matchedQ) {
                    const isAnswered = userQ.answer !== null && userQ.status === 'Answered';
                    let isCorrect = false;
                    let marks = 0;
                    
                    if (isAnswered) {
                        if (matchedQ.answer_range) {
                            const [min, max] = matchedQ.answer_range.split('-').map(parseFloat);
                            isCorrect = userQ.answer >= min && userQ.answer <= max;
                        } else {
                            isCorrect = Math.abs(userQ.answer - matchedQ.answer) < 0.01;
                        }
                        
                        marks = isCorrect ? answerKeySection.marks_per_question : 0;
                        
                        if (isCorrect) result.correct_count++;
                        else result.incorrect_count++;
                    } else {
                        result.unattempted_count++;
                    }
                    
                    result.score += marks;
                    result.questions.push({
                        ...userQ,
                        correct_answer: matchedQ.answer,
                        is_correct: isCorrect,
                        marks: marks,
                        max_marks: answerKeySection.marks_per_question
                    });
                }
            });
            
            return result;
        }

        // Process MSQ Section
        function processMSQSection(userQuestions, answerKeySection) {
            const result = {
                name: 'Section 2 - MSQ',
                score: 0,
                correct_count: 0,
                incorrect_count: 0,
                partial_count: 0,
                unattempted_count: 0,
                total_questions: answerKeySection.total_questions,
                questions: []
            };
            
            userQuestions.forEach(userQ => {
                const matchedQ = findMatchingQuestion(userQ, answerKeySection.questions);
                
                if (matchedQ) {
                    const isAnswered = userQ.answer && userQ.answer.length > 0 && userQ.status === 'Answered';
                    let marks = 0;
                    let status = 'unattempted';
                    
                    if (isAnswered) {
                        const userAnswerSet = new Set(userQ.answer.map(a => 
                            typeof a === 'number' ? String.fromCharCode(64 + a) : a
                        ));
                        const correctAnswerSet = new Set(matchedQ.correct_answers);
                        
                        const correctCount = [...userAnswerSet].filter(a => correctAnswerSet.has(a)).length;
                        const incorrectCount = userAnswerSet.size - correctCount;
                        const totalCorrect = correctAnswerSet.size;
                        
                        if (correctCount === totalCorrect && incorrectCount === 0) {
                            marks = answerKeySection.marks_scheme.full_marks;
                            status = 'correct';
                            result.correct_count++;
                        } else if (incorrectCount > 0) {
                            marks = answerKeySection.marks_scheme.negative;
                            status = 'incorrect';
                            result.incorrect_count++;
                        } else if (correctCount > 0) {
                            marks = answerKeySection.marks_scheme[`partial_${correctCount}`] || 0;
                            status = 'partial';
                            result.partial_count++;
                        } else {
                            marks = 0;
                            status = 'incorrect';
                            result.incorrect_count++;
                        }
                    } else {
                        result.unattempted_count++;
                    }
                    
                    result.score += marks;
                    result.questions.push({
                        ...userQ,
                        correct_answer: matchedQ.correct_answers,
                        status: status,
                        marks: marks,
                        max_marks: answerKeySection.marks_scheme.full_marks
                    });
                }
            });
            
            return result;
        }

        // Process MCQ Section
        function processMCQSection(userQuestions, answerKeySection) {
            const result = {
                name: 'Section 3 - MCQ',
                score: 0,
                correct_count: 0,
                incorrect_count: 0,
                unattempted_count: 0,
                total_questions: answerKeySection.total_questions,
                questions: []
            };
            
            userQuestions.forEach(userQ => {
                const matchedQ = findMatchingQuestion(userQ, answerKeySection.questions);
                
                if (matchedQ) {
                    const isAnswered = userQ.answer !== null && userQ.status === 'Answered';
                    let isCorrect = false;
                    let marks = 0;
                    
                    if (isAnswered) {
                        const userAnswer = typeof userQ.answer === 'number' ? 
                            String.fromCharCode(64 + userQ.answer) : userQ.answer;
                        isCorrect = userAnswer === matchedQ.correct_answer;
                        
                        marks = isCorrect ? 
                            answerKeySection.marks_per_question : 
                            answerKeySection.negative_marking;
                        
                        if (isCorrect) result.correct_count++;
                        else result.incorrect_count++;
                    } else {
                        result.unattempted_count++;
                    }
                    
                    result.score += marks;
                    result.questions.push({
                        ...userQ,
                        correct_answer: matchedQ.correct_answer,
                        is_correct: isCorrect,
                        marks: marks,
                        max_marks: answerKeySection.marks_per_question
                    });
                }
            });
            
            return result;
        }

        // Display results
        function displayResults(results) {
            document.getElementById('totalScore').textContent = results.total_score.toFixed(2);
            document.getElementById('totalCorrect').textContent = results.total_correct;
            document.getElementById('totalIncorrect').textContent = results.total_incorrect;
            document.getElementById('totalUnattempted').textContent = results.total_unattempted;
            
            detailedResults.innerHTML = '';
            
            Object.values(results.sections).forEach(section => {
                const sectionHtml = generateSectionHTML(section);
                detailedResults.innerHTML += sectionHtml;
            });
            
            outputSection.classList.add('active');
        }

        // Generate section HTML
        function generateSectionHTML(section) {
            let html = `
                <div class="section-results">
                    <div class="section-header">
                        <span>${section.name}</span>
                        <span class="section-score">${section.score} marks</span>
                    </div>
            `;
            
            section.questions.forEach(q => {
                const statusClass = q.status === 'correct' || q.is_correct ? 'correct' : 
                                   q.status === 'partial' ? 'partial' : 
                                   q.status === 'unattempted' ? '' : 'incorrect';
                
                const statusLabel = q.status === 'correct' || q.is_correct ? 'Correct' : 
                                   q.status === 'partial' ? 'Partial' : 
                                   q.status === 'unattempted' ? 'Unattempted' : 'Incorrect';
                
                const statusBadge = q.status === 'correct' || q.is_correct ? 'status-correct' : 
                                   q.status === 'partial' ? 'status-partial' : 
                                   q.status === 'unattempted' ? '' : 'status-incorrect';
                
                html += `
                    <div class="question-card ${statusClass}">
                        <div class="question-header">
                            <span class="question-number">Q.${q.question_number} [${q.question_type}]</span>
                            ${statusLabel !== 'Unattempted' ? `<span class="question-status ${statusBadge}">${statusLabel}</span>` : ''}
                        </div>
                        <div class="question-text">${q.question_text}</div>
                        <div class="answer-comparison">
                            <div class="answer-row">
                                <span class="answer-label">Your Answer:</span>
                                <span class="answer-value ${q.is_correct || q.status === 'correct' ? 'answer-correct' : q.status === 'partial' ? '' : 'answer-incorrect'}">
                                    ${formatAnswer(q.answer)}
                                </span>
                            </div>
                            <div class="answer-row">
                                <span class="answer-label">Correct Answer:</span>
                                <span class="answer-value answer-correct">
                                    ${formatAnswer(q.correct_answer)}
                                </span>
                            </div>
                            <div class="marks-info">
                                Marks: ${q.marks} / ${q.max_marks}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            return html;
        }

        // Format answer for display
        function formatAnswer(answer) {
            if (answer === null || answer === undefined) {
                return 'Not Answered';
            }
            if (Array.isArray(answer)) {
                return answer.join(', ');
            }
            return answer.toString();
        }

        // Download results button handler
        downloadBtn.addEventListener('click', () => {
            const content = JSON.stringify(calculatedResults, null, 2);
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `uceed_2026_results_${new Date().getTime()}.json`;
            a.click();
            URL.revokeObjectURL(url);
        });

        // Error handling
        function showError(message) {
            errorMsg.textContent = message;
            errorMsg.classList.add('active');
        }

        function hideError() {
            errorMsg.classList.remove('active');
        }
    </script>
</body>
</html>